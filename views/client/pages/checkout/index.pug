extends ../../layouts/default.pug 
include ../../mixins/box-head.pug
include ../../mixins/alert.pug

block main 
    .checkout-page
        .container.my-3
            .row 
                .col-12 
                    +box-head(titlePage)

                    if(cartDetail && cartDetail.products && cartDetail.products.length > 0)
                        table(class="table table-bordered")
                            thead
                                tr 
                                    th STT 
                                    th Ảnh 
                                    th Tên 
                                    th Giá
                                    th Số lượng 
                                    th Tổng tiền 
                            tbody
                                each item, index in cartDetail.products
                                    tr 
                                        td #{index + 1}
                                        td 
                                            img(src=item.productInfo.thumbnail, alt=item.productInfo.title, width="80px")
                                        td #{item.productInfo.title}
                                        td #{formatVND(item.productInfo.priceNew)} 
                                        td #{item.productInfo.quantity}
                                        td #{formatVND(item.productInfo.quantity * item.productInfo.priceNew)} 
                        h3(class="text-end mt-3 fw-bold") Tổng đơn hàng: #{formatVND(cartDetail.totalPrice)} 

            if(cartDetail.products.length > 0)
                .row 
                    .col-12 
                        .card.p-4.my-4
                            form(
                                action="/checkout/order"
                                method="POST"
                            )    
                                div(class="mb-3")
                                    label(for="fullName" class="form-label") Họ tên 
                                    input(
                                        type="text"
                                        class="form-control"
                                        id="fullName"
                                        name="fullName"
                                        required    
                                    ) 
                                div(class="mb-3")
                                    label(for="phone" class="form-label") Số điện thoại
                                    input(
                                        type="number"
                                        class="form-control"
                                        id="phone"
                                        name="phone"
                                        required    
                                    ) 
                                div(class="mb-3")
                                    label(for="address" class="form-label") Địa chỉ
                                    input(
                                        type="text"
                                        class="form-control"
                                        id="address"
                                        name="address"
                                        required    
                                    ) 
                                div(class="mb-3")
                                    label.form-label Phương thức thanh toán

                                    .payment-methods
                                        label.payment-item
                                            input(type="radio" name="paymentMethod" value="cod" checked)
                                            i(class="fa-solid fa-money-bill-1-wave")
                                            span Thanh toán khi nhận hàng (COD)

                                        label.payment-item
                                            input(type="radio" name="paymentMethod" value="bank")
                                            i(class="fa-solid fa-building-columns")
                                            span Chuyển khoản ngân hàng

                                        label.payment-item
                                            input(type="radio" name="paymentMethod" value="card")
                                            i(class="fa-solid fa-credit-card")
                                            span Thẻ ATM / Internet Banking

                                        label.payment-item
                                            input(type="radio" name="paymentMethod" value="visa")
                                            i(class="fa-brands fa-cc-visa")
                                            span Visa / MasterCard

                                        label.payment-item
                                            input(type="radio" name="paymentMethod" value="momo")
                                            img(src="/images/MOMO-Logo-App.png" alt="MoMo" width="20px" style="margin-right: 8px;")
                                            span Ví MoMo

                                        label.payment-item
                                            input(type="radio" name="paymentMethod" value="vnpay")
                                            i(class="fa-solid fa-qrcode")
                                            span QR VNPAY

                                div(class="mb-3")
                                    button(
                                        type="submit"
                                        class="btn btn-success w-100"
                                    ) Đặt hàng
                

    script(src="/js/cart.js")
