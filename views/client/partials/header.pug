include ../mixins/sub-menu.pug

header.header
  .container
    nav.navbar.navbar-expand-lg.navbar-light.bg-white.py-3
      // LOGO
      a.navbar-brand(href="/")
        img(src=settingGeneral.logo, alt=settingGeneral.websiteName, height="40")

      // Nút toggle cho mobile
      button.navbar-toggler(type="button" data-bs-toggle="collapse" data-bs-target="#mainNav")
        span.navbar-toggler-icon

      // Nội dung điều hướng
      .collapse.navbar-collapse#mainNav
        // Form tìm kiếm căn giữa
        form.d-flex.mx-auto(
          action="/search"
          method="GET"
          style="max-width: 400px;"
        )
          input.form-control.me-2(
            type="text"
            name="keyword"
            placeholder="Nhập từ khóa tìm kiếm..."
            value=keyword
          )
          button.btn.btn-primary(type="submit") Tìm

        // Menu bên phải
        ul.navbar-nav.ms-auto.align-items-center
          li.nav-item
            a.nav-link(href="/") Trang chủ

          li.nav-item.dropdown
            - const pathProduct = "/products"
            a.nav-link.dropdown-toggle(href=pathProduct data-bs-toggle="dropdown") Sản phẩm
            ul.dropdown-menu
              +sub-menu(layoutProductCategory, pathProduct)

          li.nav-item
            a.nav-link(href="/cart") Giỏ hàng (#{miniCart ? miniCart.totalQuantity : 0})

          if user
            li.nav-item
              a.btn.btn-primary.ms-2(href="/user/info") #{user.fullName}
            li.nav-item 
              a.nav-link(href="/chat") 
                i.fa-solid.fa-comment
            li.nav-item
              a.nav-link(href="/user/logout") Đăng xuất
          else
            li.nav-item
              a.nav-link(href="/user/login") Đăng nhập
            li.nav-item
              a.btn.btn-outline-primary.ms-2(href="/user/register") Đăng ký

// Giao diện cũ
//- include ../mixins/sub-menu.pug
//- header.header 
//-     .container 
//-         .row.align-items-center
//-             .col-2
//-                 .inner-logo
//-                     a(href="/")
//-                         img(src= settingGeneral.logo, alt= settingGeneral.websiteName) 
//-             .col-4
//-                 form(
//-                     action= `/search`
//-                     method="GET"
//-                 )
//-                     div(class="mb-3 d-flex")
//-                         input(
//-                             type="text"
//-                             placeholder="Nhập từ khóa tìm kiếm..."
//-                             class="form-control"
//-                             name="keyword"
//-                             value=keyword
//-                         )
//-                         button(
//-                             type="submid"
//-                             class="btn btn-primary"
//-                         ) Tìm
//-             .col-6
//-                 .inner-menu
//-                     ul 
//-                         li
//-                             a(href="/") Trang chủ
//-                         li(class="sub-menu")
//-                             -const pathProduct= "/products"
//-                             a(href=pathProduct) Sản phẩm
//-                                 +sub-menu(layoutProductCategory, pathProduct) 
//-                         li
//-                             a(href="/cart") Giỏ hàng (#{miniCart ? miniCart.totalQuantity : 0})
//-                         if(user)
//-                             li
//-                                 a(href="/user/info" class="btn-primary btn") #{user.fullName}
//-                             li 
//-                                 a(href="/user/logout") Đăng xuất
//-                         else
//-                             li 
//-                                 a(href="/user/login") Đăng nhập
//-                             li 
//-                                 a(href="/user/register") Đăng kí